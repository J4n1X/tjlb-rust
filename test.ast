Program AST:
============

Global Variables:
  const i32 STDIN = Some(Expression { kind: Literal(Integer(0)), expr_type: LangType { base: SInt, size_bits: 32, pointer_depth: 0, is_const: false }, pos: Position { line: 1, column: 20 } })
  const i32 STDOUT = Some(Expression { kind: Literal(Integer(1)), expr_type: LangType { base: SInt, size_bits: 32, pointer_depth: 0, is_const: false }, pos: Position { line: 2, column: 21 } })
  const u64 BUFSIZ = Some(Expression { kind: Literal(Integer(4096)), expr_type: LangType { base: SInt, size_bits: 32, pointer_depth: 0, is_const: false }, pos: Position { line: 3, column: 21 } })

Functions:
  fn malloc(u64 size) -> u8*
    [extern]
  fn puts(u8* str) -> u0
    [extern]
  fn read(i32 fd, u8* buf, u64 size) -> i64
    [extern]
  fn strlen(u8* str) -> u64
    body: 3 statements
    statements:
      [0]: Statement {
    kind: VarDecl {
        var_type: LangType {
            base: UInt,
            size_bits: 64,
            pointer_depth: 0,
            is_const: false,
        },
        name: "counter",
        initializer: Some(
            Expression {
                kind: Literal(
                    Integer(
                        0,
                    ),
                ),
                expr_type: LangType {
                    base: SInt,
                    size_bits: 32,
                    pointer_depth: 0,
                    is_const: false,
                },
                pos: Position {
                    line: 10,
                    column: 18,
                },
            },
        ),
    },
    pos: Position {
        line: 10,
        column: 3,
    },
}
      [1]: Statement {
    kind: While {
        condition: Expression {
            kind: Comparison {
                left: Expression {
                    kind: Binary {
                        left: Expression {
                            kind: Cast {
                                expr: Expression {
                                    kind: Variable(
                                        "str",
                                    ),
                                    expr_type: LangType {
                                        base: UInt,
                                        size_bits: 8,
                                        pointer_depth: 1,
                                        is_const: false,
                                    },
                                    pos: Position {
                                        line: 11,
                                        column: 10,
                                    },
                                },
                                target_type: LangType {
                                    base: UInt,
                                    size_bits: 64,
                                    pointer_depth: 0,
                                    is_const: false,
                                },
                            },
                            expr_type: LangType {
                                base: UInt,
                                size_bits: 64,
                                pointer_depth: 0,
                                is_const: false,
                            },
                            pos: Position {
                                line: 11,
                                column: 10,
                            },
                        },
                        op: Add,
                        right: Expression {
                            kind: Variable(
                                "counter",
                            ),
                            expr_type: LangType {
                                base: UInt,
                                size_bits: 64,
                                pointer_depth: 0,
                                is_const: false,
                            },
                            pos: Position {
                                line: 11,
                                column: 24,
                            },
                        },
                    },
                    expr_type: LangType {
                        base: UInt,
                        size_bits: 64,
                        pointer_depth: 0,
                        is_const: false,
                    },
                    pos: Position {
                        line: 11,
                        column: 10,
                    },
                },
                op: NotEqual,
                right: Expression {
                    kind: Literal(
                        Integer(
                            0,
                        ),
                    ),
                    expr_type: LangType {
                        base: SInt,
                        size_bits: 32,
                        pointer_depth: 0,
                        is_const: false,
                    },
                    pos: Position {
                        line: 11,
                        column: 36,
                    },
                },
            },
            expr_type: LangType {
                base: SInt,
                size_bits: 32,
                pointer_depth: 0,
                is_const: false,
            },
            pos: Position {
                line: 11,
                column: 10,
            },
        },
        body: [
            Statement {
                kind: VarAssign {
                    name: "counter",
                    value: Expression {
                        kind: Binary {
                            left: Expression {
                                kind: Variable(
                                    "counter",
                                ),
                                expr_type: LangType {
                                    base: UInt,
                                    size_bits: 64,
                                    pointer_depth: 0,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 12,
                                    column: 5,
                                },
                            },
                            op: Add,
                            right: Expression {
                                kind: Literal(
                                    Integer(
                                        1,
                                    ),
                                ),
                                expr_type: LangType {
                                    base: SInt,
                                    size_bits: 32,
                                    pointer_depth: 0,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 12,
                                    column: 17,
                                },
                            },
                        },
                        expr_type: LangType {
                            base: UInt,
                            size_bits: 64,
                            pointer_depth: 0,
                            is_const: false,
                        },
                        pos: Position {
                            line: 12,
                            column: 5,
                        },
                    },
                },
                pos: Position {
                    line: 12,
                    column: 5,
                },
            },
        ],
    },
    pos: Position {
        line: 11,
        column: 3,
    },
}
      [2]: Statement {
    kind: Return(
        Some(
            Expression {
                kind: Variable(
                    "counter",
                ),
                expr_type: LangType {
                    base: UInt,
                    size_bits: 64,
                    pointer_depth: 0,
                    is_const: false,
                },
                pos: Position {
                    line: 14,
                    column: 10,
                },
            },
        ),
    ),
    pos: Position {
        line: 14,
        column: 3,
    },
}
  fn strcat(u8* dst, u8* src) -> u8*
    body: 4 statements
    statements:
      [0]: Statement {
    kind: While {
        condition: Expression {
            kind: Comparison {
                left: Expression {
                    kind: Dereference(
                        Expression {
                            kind: Variable(
                                "dst",
                            ),
                            expr_type: LangType {
                                base: UInt,
                                size_bits: 8,
                                pointer_depth: 1,
                                is_const: false,
                            },
                            pos: Position {
                                line: 18,
                                column: 10,
                            },
                        },
                    ),
                    expr_type: LangType {
                        base: UInt,
                        size_bits: 8,
                        pointer_depth: 0,
                        is_const: false,
                    },
                    pos: Position {
                        line: 18,
                        column: 9,
                    },
                },
                op: NotEqual,
                right: Expression {
                    kind: Literal(
                        Integer(
                            0,
                        ),
                    ),
                    expr_type: LangType {
                        base: SInt,
                        size_bits: 32,
                        pointer_depth: 0,
                        is_const: false,
                    },
                    pos: Position {
                        line: 18,
                        column: 18,
                    },
                },
            },
            expr_type: LangType {
                base: SInt,
                size_bits: 32,
                pointer_depth: 0,
                is_const: false,
            },
            pos: Position {
                line: 18,
                column: 9,
            },
        },
        body: [
            Statement {
                kind: VarAssign {
                    name: "dst",
                    value: Expression {
                        kind: Binary {
                            left: Expression {
                                kind: Variable(
                                    "dst",
                                ),
                                expr_type: LangType {
                                    base: UInt,
                                    size_bits: 8,
                                    pointer_depth: 1,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 19,
                                    column: 5,
                                },
                            },
                            op: Add,
                            right: Expression {
                                kind: Literal(
                                    Integer(
                                        1,
                                    ),
                                ),
                                expr_type: LangType {
                                    base: SInt,
                                    size_bits: 32,
                                    pointer_depth: 0,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 19,
                                    column: 13,
                                },
                            },
                        },
                        expr_type: LangType {
                            base: UInt,
                            size_bits: 8,
                            pointer_depth: 1,
                            is_const: false,
                        },
                        pos: Position {
                            line: 19,
                            column: 5,
                        },
                    },
                },
                pos: Position {
                    line: 19,
                    column: 5,
                },
            },
        ],
    },
    pos: Position {
        line: 18,
        column: 3,
    },
}
      [1]: Statement {
    kind: While {
        condition: Expression {
            kind: Comparison {
                left: Expression {
                    kind: Variable(
                        "src",
                    ),
                    expr_type: LangType {
                        base: UInt,
                        size_bits: 8,
                        pointer_depth: 1,
                        is_const: false,
                    },
                    pos: Position {
                        line: 21,
                        column: 9,
                    },
                },
                op: NotEqual,
                right: Expression {
                    kind: Literal(
                        Integer(
                            0,
                        ),
                    ),
                    expr_type: LangType {
                        base: SInt,
                        size_bits: 32,
                        pointer_depth: 0,
                        is_const: false,
                    },
                    pos: Position {
                        line: 21,
                        column: 17,
                    },
                },
            },
            expr_type: LangType {
                base: SInt,
                size_bits: 32,
                pointer_depth: 0,
                is_const: false,
            },
            pos: Position {
                line: 21,
                column: 9,
            },
        },
        body: [
            Statement {
                kind: DerefAssign {
                    target: Expression {
                        kind: Dereference(
                            Expression {
                                kind: Variable(
                                    "dst",
                                ),
                                expr_type: LangType {
                                    base: UInt,
                                    size_bits: 8,
                                    pointer_depth: 1,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 22,
                                    column: 6,
                                },
                            },
                        ),
                        expr_type: LangType {
                            base: UInt,
                            size_bits: 8,
                            pointer_depth: 0,
                            is_const: false,
                        },
                        pos: Position {
                            line: 22,
                            column: 5,
                        },
                    },
                    value: Expression {
                        kind: Dereference(
                            Expression {
                                kind: Variable(
                                    "src",
                                ),
                                expr_type: LangType {
                                    base: UInt,
                                    size_bits: 8,
                                    pointer_depth: 1,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 22,
                                    column: 13,
                                },
                            },
                        ),
                        expr_type: LangType {
                            base: UInt,
                            size_bits: 8,
                            pointer_depth: 0,
                            is_const: false,
                        },
                        pos: Position {
                            line: 22,
                            column: 12,
                        },
                    },
                },
                pos: Position {
                    line: 22,
                    column: 5,
                },
            },
            Statement {
                kind: VarAssign {
                    name: "src",
                    value: Expression {
                        kind: Binary {
                            left: Expression {
                                kind: Variable(
                                    "src",
                                ),
                                expr_type: LangType {
                                    base: UInt,
                                    size_bits: 8,
                                    pointer_depth: 1,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 23,
                                    column: 5,
                                },
                            },
                            op: Add,
                            right: Expression {
                                kind: Literal(
                                    Integer(
                                        1,
                                    ),
                                ),
                                expr_type: LangType {
                                    base: SInt,
                                    size_bits: 32,
                                    pointer_depth: 0,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 23,
                                    column: 13,
                                },
                            },
                        },
                        expr_type: LangType {
                            base: UInt,
                            size_bits: 8,
                            pointer_depth: 1,
                            is_const: false,
                        },
                        pos: Position {
                            line: 23,
                            column: 5,
                        },
                    },
                },
                pos: Position {
                    line: 23,
                    column: 5,
                },
            },
            Statement {
                kind: VarAssign {
                    name: "dst",
                    value: Expression {
                        kind: Binary {
                            left: Expression {
                                kind: Variable(
                                    "dst",
                                ),
                                expr_type: LangType {
                                    base: UInt,
                                    size_bits: 8,
                                    pointer_depth: 1,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 24,
                                    column: 5,
                                },
                            },
                            op: Add,
                            right: Expression {
                                kind: Literal(
                                    Integer(
                                        1,
                                    ),
                                ),
                                expr_type: LangType {
                                    base: SInt,
                                    size_bits: 32,
                                    pointer_depth: 0,
                                    is_const: false,
                                },
                                pos: Position {
                                    line: 24,
                                    column: 13,
                                },
                            },
                        },
                        expr_type: LangType {
                            base: UInt,
                            size_bits: 8,
                            pointer_depth: 1,
                            is_const: false,
                        },
                        pos: Position {
                            line: 24,
                            column: 5,
                        },
                    },
                },
                pos: Position {
                    line: 24,
                    column: 5,
                },
            },
        ],
    },
    pos: Position {
        line: 21,
        column: 3,
    },
}
      [2]: Statement {
    kind: DerefAssign {
        target: Expression {
            kind: Dereference(
                Expression {
                    kind: Variable(
                        "dst",
                    ),
                    expr_type: LangType {
                        base: UInt,
                        size_bits: 8,
                        pointer_depth: 1,
                        is_const: false,
                    },
                    pos: Position {
                        line: 26,
                        column: 4,
                    },
                },
            ),
            expr_type: LangType {
                base: UInt,
                size_bits: 8,
                pointer_depth: 0,
                is_const: false,
            },
            pos: Position {
                line: 26,
                column: 3,
            },
        },
        value: Expression {
            kind: Literal(
                Integer(
                    0,
                ),
            ),
            expr_type: LangType {
                base: SInt,
                size_bits: 32,
                pointer_depth: 0,
                is_const: false,
            },
            pos: Position {
                line: 26,
                column: 11,
            },
        },
    },
    pos: Position {
        line: 26,
        column: 3,
    },
}
      [3]: Statement {
    kind: Return(
        Some(
            Expression {
                kind: Variable(
                    "dst",
                ),
                expr_type: LangType {
                    base: UInt,
                    size_bits: 8,
                    pointer_depth: 1,
                    is_const: false,
                },
                pos: Position {
                    line: 27,
                    column: 10,
                },
            },
        ),
    ),
    pos: Position {
        line: 27,
        column: 3,
    },
}
  fn main(i32 argc, u8** argv) -> i32
    body: 1 statements
    statements:
      [0]: Statement {
    kind: Return(
        Some(
            Expression {
                kind: Literal(
                    Integer(
                        0,
                    ),
                ),
                expr_type: LangType {
                    base: SInt,
                    size_bits: 32,
                    pointer_depth: 0,
                    is_const: false,
                },
                pos: Position {
                    line: 44,
                    column: 11,
                },
            },
        ),
    ),
    pos: Position {
        line: 44,
        column: 3,
    },
}

Parsing completed successfully!
