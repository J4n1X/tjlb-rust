# This is some unfinished test code which should test pointer arithmetic and string escape sequences
const i32 STDIN = 0
const i32 STDOUT = 1
const u64 BUFSIZ = 4096

extern fn malloc(u64 size) -> u8*
extern fn puts(u8 *str) -> u0
extern fn read(i32 fd, u8* buf, u64 size) -> i64

fn strlen(u8 *str) -> u64 {
  u64 counter = 0
  while((str as u64) + counter != 0) {
    counter += 1
  }
  return counter
}

fn strcat(u8 *dst, u8* src) -> u8* {
  while(*dst != 0) {
    dst += 1
  }
  while(src != 0) {
    *dst = *src
    src += 1
    dst += 1
  }
  *dst = 0
  return dst
}

fn main(i32 argc, u8** argv) -> i32 {
  #-
  const u8 *question = "What is your name?\n"
  const u8 *prefix = "Hello, "
  const u8 *suffix = "!\n"
  puts(question)

  u8 *input_buffer = malloc(BUFSIZ)
  if(!input_buffer) {
    puts("Failed to allocate buffer!")
    return -1
  }
  i64 read_len = read(STDIN, input_buffer, BUFSIZ)
  -#
  return 0
}